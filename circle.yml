dependencies:
  cache_directories:
    - "~/.rvm/gems/ruby-2.0.0-p451"

# test:
#   override:
#     - bundle exec rake i_say tomato=tomahto

deployment:
  staging:
    branch: develop
    commands:
      - bundle exec middleman build --verbose
      - bundle exec middleman s3_sync --bucket=staging-fove
      - STAGING_CLOUDFRONT_DISTRIBUTION_ID= bundle exec middleman invalidate
      # Example for cross browser testing:
      #- bundle exec rake cross_browser:chrome BS_USERNAME=$BS_USERNAME BS_AUTHKEY=$BS_AUTHKEY

  production:
    branch: master
    commands:
      - bundle exec middleman build --verbose
      - bundle exec middleman s3_sync --bucket=production-fove
      - PRODUCTION_CLOUDFRONT_DISTRIBUTION_ID= bundle exec middleman invalidate
